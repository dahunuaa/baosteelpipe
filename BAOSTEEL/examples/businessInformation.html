<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>businessInformation</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../css/mui.min.css">
		<style>
			html,
			body {
				background-color:#efeff4;
			}
		    div{
		    	background-color: #EEEEEE;
		    }
		</style>
    </head>
	<body>
		<header>
			
		</header>
		<div align="center" style="background-color:#FAFAFA">
			
			<input type="search" id="buss_search" class="mui-icon mui-icon-search" placeholder="请输入搜索内容" style="width:250px;height:35px; background-color:#E8E8E8; margin-top: 10px;margin-bottom: 5px;"/>
			<a id="icon-search"><span class="mui-icon mui-icon-search"></span></a>
			<a class="mui-pull-left" style="margin:15px 15px 15px 15px;" id="refresh">刷新</a>
			<hr />
		</div>
		<div class="mui-content" id="content">
        <ul class="mui-table-view" style="margin-top:-10px;" id="list">
  				
		</ul>		
		</div>
		
		<!--下拉刷新容器-->
		<!--<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				数据列表
				<ul class="mui-table-view mui-table-view-chevron">
					
				</ul>
			</div>
		</div>-->
		
	
	<script src="../js/mui.min.js"></script>
	<script src="../js/app.js"></script>
	<script>
//          mui.init({
//				pullRefresh: {
//					container: '#pullrefresh',
//					down: {
//						callback: pulldownRefresh
//					},
//					up: {
//						contentrefresh: '正在加载...',
//						callback: pullupRefresh
//					}
//				}
//			});
//			/**
//			 * 下拉刷新具体业务实现
//			 */
//			function pulldownRefresh() {
//				setTimeout(function() {
//					var table = document.body.querySelector('.mui-table-view');
//					var cells = document.body.querySelectorAll('.mui-table-view-cell');
//					for (var i = cells.length, len = i + 3; i < len; i++) {
//						var li = document.createElement('li');
//						li.className = 'mui-table-view-cell';
//						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
//						//下拉刷新，新纪录插到最前面；
//						table.insertBefore(li, table.firstChild);
//					}
//					mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
//				}, 1500);
//			}
//			var count = 0;
//			/**
//			 * 上拉加载具体业务实现
//			 */
//			function pullupRefresh() {
//				setTimeout(function() {
//					mui('#pullrefresh').pullRefresh().endPullupToRefresh((++count > 2)); //参数为true代表没有更多数据了。
//					var table = document.body.querySelector('.mui-table-view');
//					var cells = document.body.querySelectorAll('.mui-table-view-cell');
//					for (var i = cells.length, len = i + 20; i < len; i++) {
//						var li = document.createElement('li');
//						li.className = 'mui-table-view-cell';
//						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
//						table.appendChild(li);
//					}
//				}, 1500);
//			}
//			if (mui.os.plus) {
//				mui.plusReady(function() {
//					setTimeout(function() {
//						mui('#pullrefresh').pullRefresh().pullupLoading();
//					}, 1000);
//
//				});
//			} else {
//				mui.ready(function() {
//					mui('#pullrefresh').pullRefresh().pullupLoading();
//				});
//			}

	
	
	
	
	
		(function($,doc){
			$.init();
			$.ready(function(){
				var refresh = document.getElementById("refresh")
				var content = document.getElementById("content")
				var buss_search=document.getElementById("buss_search")
				var list = document.getElementById("list")	
					list.innerHTML="";//解决刷新重复出出现的问题
					mui.ajax({
					type: "post",//后面必须加逗号！！！！！！！！
					url: "http://192.168.191.1:8080/baosteel/BusinessInformation",
					data:{
						
					},
					async:true,
					dataType:"json",
					success:function(data){
						
												            
						mui.each(data,function(key,value){
						var li = document.createElement("li")
						li.className="mui-table-view-cell"
                        li.innerHTML = "序号："+value.buss_id+"&nbsp;&nbsp;&nbsp&nbsp;&nbsp;"+"编辑人："+value.editor_name+"<br>"+"编辑时间："+value.time+"<br>"+"出差日期："+value.buss_begintime +"—"+value.buss_endtime +"<br>" +value.bussmen_name 
                                       +"<br>"+value.accounts+"人"+"&nbsp&nbsp"+value.buss_reason+"&nbsp&nbsp"+value.buss_place;
                                       
                        list.appendChild(li)
						})
																                                         			           		           
		   		                         },
				  
				           });					

				buss_search.addEventListener("tap",function(event){
					mui.openWindow({
						url:"buss_search.html",
						id:"buss_search"
//						styles:{
//				        top:'0px',//mui标题栏默认高度为45px；
//				        bottom:'0px'//默认为0px，可不定义；
//				      }
					})
				})
				refresh.addEventListener("tap",function(event){
					var list = document.getElementById("list")	
					list.innerHTML="";//解决刷新重复出出现的问题
					mui.ajax({
					type: "post",//后面必须加逗号！！！！！！！！
//					url: "http://121.42.186.54:8081/baosteel/BusinessInformation",
                    url: "http://192.168.191.1:8080/baosteel/BusinessInformation",
					data:{
						
					},
					async:true,
					dataType:"json",
					success:function(data){
						
												            
						mui.each(data,function(key,value){
						var li = document.createElement("li")
						li.className="mui-table-view-cell"
                        li.innerHTML = "序号："+value.buss_id+"&nbsp;&nbsp;&nbsp&nbsp;&nbsp;"+"编辑人："+value.editor_name+"<br>"+"编辑时间："+value.time+"<br>"+"出差日期："+value.buss_begintime +"—"+value.buss_endtime +"<br>" +value.bussmen_name 
                                       +"<br>"+value.accounts+"人"+"&nbsp&nbsp"+value.buss_reason+"&nbsp&nbsp"+value.buss_place;
                                       
                        list.appendChild(li)
						})
																                                         			           		           
		   		                         },
				  
				           });					
				     })
					
				});
		}(mui,document))
		</script>

  </body>
</html>
